package:
  name: faas-cli
  version: {{ .version }}
  targets:
  {{ range .platforms -}}
  {{ $platform := .platform -}}
  {{ range .architectures -}}
  {{ $architecture := . -}}
  - platform: {{ $platform }}
    architecture: {{ $architecture }}
    {{- $extension := "" -}}
    {{- if eq $platform "windows" -}}
      {{- $extension = ".exe" -}}
    {{- end }}
    executables:
    - faas-cli{{ $extension }}
    steps:
    - download:
        {{- $suffix := "" -}}
        {{- if eq $platform "darwin" -}}
          {{- $suffix = "-darwin" -}}
        {{- else if eq $architecture "arm64" -}}
          {{- $suffix = "-arm64" -}}
        {{- else if or (eq $architecture "armv6") (eq $architecture "armv7") -}}
          {{- $suffix = "-armhf" -}}
        {{- end }}
        url: https://github.com/openfaas/faas-cli/releases/download/{{ $.version }}/faas-cli{{ $suffix }}
        out: faas-cli-{{ $platform }}-{{ $architecture }}{{ $extension }}
  {{ end -}}
  {{ end }}